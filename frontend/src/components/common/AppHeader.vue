<template>
  <v-app-bar 
    flat 
    color="white"
    height="64" 
    style="backdrop-filter: blur(8px);" 
    class="app-header" 
  >
    <v-container class="d-flex align-center fill-height pa-0 px-4">
      
      <!-- 1. LOGO/LINK HOME -->
      <RouterLink to="/" class="text-decoration-none">
        <div class="text-h6 font-weight-bold flex-grow-0 text-grey-darken-4 hover:text-amber-700 transition">
          <span class="mr-2">üêû</span> Bug Caf√©
        </div>
      </RouterLink>

      <v-spacer class="d-md-none"></v-spacer>
      
      <!-- 2. A√á√ïES MOBILE/SMALL SCREENS (DIREITA) -->
      <div class="d-flex align-center d-md-none ms-2">
        
        <!-- Bot√£o Carrinho (Mobile) -->
        <RouterLink to="/carrinho" class="text-decoration-none">
            <v-btn icon variant="text" class="text-grey-darken-1">
              <v-badge :content="cartCount" color="red" dot floating offset-y="-10" v-if="cartCount > 0">
                <v-icon>mdi-cart</v-icon>
              </v-badge>
              <v-icon v-else>mdi-cart</v-icon>
            </v-btn>
        </RouterLink>

        <!-- Bot√£o Login/Cadastro (Mobile - Oculto em telas menores que 'sm') -->
        <RouterLink to="/login-cadastro" class="text-decoration-none">
            <v-btn color="primary" size="small" class="font-weight-medium ms-2 d-none d-sm-flex">
              Login
            </v-btn>
        </RouterLink>
        
        <!-- √çcone Menu Hamburger (Voc√™ pode implementar um Drawer aqui) -->
        <v-btn icon variant="text" class="ms-2">
            <v-icon>mdi-menu</v-icon>
        </v-btn>
      </div>

      <!-- Espa√ßador √öNICO: Empurra a Navega√ß√£o para o centro e as A√ß√µes Desktop para a direita -->
      <v-spacer class="d-none d-md-block"></v-spacer> 
      
      <!-- 3. NAVEGA√á√ÉO CENTRALIZADA (Desktop) -->
      <div class="d-none d-md-flex align-center ga-6">
        
        <!-- Nota: Removemos os links √¢ncora (#classicos, #mais-pedidos) e focamos nas rotas principais. -->
        <RouterLink to="/" v-slot="{ href, navigate }">
          <v-btn variant="text" :href="href" @click="navigate" class="nav-link text-subtitle-1 text-grey-darken-1">In√≠cio</v-btn>
        </RouterLink>

        <RouterLink to="/monte-seu-cafe" v-slot="{ href, navigate }">
          <v-btn variant="text" :href="href" @click="navigate" class="nav-link text-subtitle-1 text-grey-darken-1">Monte seu Caf√©</v-btn>
        </RouterLink>
      </div>

      <!-- Espa√ßador 2 (Para manter a Navega√ß√£o Centralizada em Desktop) -->
      <v-spacer class="d-none d-md-block"></v-spacer>

      <!-- 4. A√á√ïES DESKTOP (Direita) -->
      <div class="d-none d-md-flex align-center ga-4">
          
        <!-- Bot√£o Carrinho com R√≥tulo (Desktop) -->
        <RouterLink to="/carrinho" class="text-decoration-none text-grey-darken-1">
          <v-btn variant="text" class="text-grey-darken-1 nav-link">
            Carrinho
            <v-badge :content="cartCount" color="red" dot floating offset-y="-10" v-if="cartCount > 0">
              <v-icon right>mdi-cart</v-icon>
            </v-badge>
            <v-icon right v-else>mdi-cart</v-icon>
          </v-btn>
        </RouterLink>
        
        <!-- Bot√£o Login/Cadastro (Desktop) -->
        <RouterLink to="/login-cadastro" class="text-decoration-none">
          <v-btn color="amber-700" class="font-weight-medium text-white">
            Login / Cadastro
          </v-btn>
        </RouterLink>

      </div>

    </v-container>
  </v-app-bar>
</template>

<script setup>
// Importamos o RouterLink para uso no template
import { RouterLink } from 'vue-router';
// 1. O cartCount agora √© uma PROP que vem do App.vue
defineProps({
    cartCount: {
        type: Number,
        default: 0
    }
}); 
</script>

<style scoped>
.app-header {
  position: sticky !important;
  top: 0;
  z-index: 50;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); 
}
/* Estilo para links ativos, se o Vuetify n√£o sobrescrever */
.router-link-active .nav-link,
.router-link-exact-active .nav-link {
    color: #B8860B !important; /* Cor amber para ativo */
}

/* Garante que o texto do RouterLink n√£o tenha sublinhado */
.text-decoration-none {
    text-decoration: none !important;
}
</style>
